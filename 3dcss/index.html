<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>淘宝造物节</title>
    <style>
        body{background-image: url("img/bg.jpg");margin:0;padding:0;border:0;width:100vw;height:100vh;}
        .container{margin: auto;width:10%;height:100%;perspective: 40vh;}
        .box{transform-style: preserve-3d;-webkit-transform-style: preserve-3d; -webkit-perspective-origin: 50% 50%;perspective-origin: 50% 50%;}
        .box div{position: absolute;}
        .box div img{width:100%;height:100%;}
    </style>
</head>
<body>
    <div class="container">
    <div class="box">
        <div><img src="img/p1.png"/>1</div>
        <div><img src="img/p2.png"/>2</div>
        <div><img src="img/p3.png"/>3</div>
        <div><img src="img/p4.png"/>4</div>
        <div> <img src="img/p5.png"/>5</div>
        <div> <img src="img/p6.png"/>6</div>
        <div> <img src="img/p7.png"/>7</div>
        <div>  <img src="img/p8.png"/>8</div>
        <div> <img src="img/p9.png"/>9</div>
        <div> <img src="img/p10.png"/>10</div>
        <div> <img src="img/p11.png"/>11</div>
        <div><img src="img/p12.png"/>12</div>
        <div><img src="img/p13.png"/>13</div>
        <div><img src="img/p14.png"/>14</div>
        <div><img src="img/p15.png"/>15</div>
        <div><img src="img/p16.png"/>16</div>
        <div><img src="img/p17.png"/>17</div>
        <div><img src="img/p18.png"/>18</div>
        <div><img src="img/p19.png"/>19</div>
        <div> <img src="img/p20.png"/>20</div>
    </div>
</div>
    <script>
        
        const box = document.querySelector('.box')
        const imgs = box.querySelectorAll('div')
        
        imgs.forEach((elem,index)=>{
            elem.style.width = window.innerWidth/2+'px'
            elem.style.height = window.innerWidth/2/83*586+'px'
            elem.style.transform = `rotateY(${index*360/imgs.length}deg) translateZ(${window.innerWidth/2*imgs.length/Math.PI/2.05}px)`

        })
        
        let rIndex = 0
        setInterval(function(){
            box.style.transform = `rotateY(${rIndex}deg)`
            rIndex++
        },50)
        
        window.addEventListener('deviceorientation', function(e) {

            var gamma = e.gamma;
            if (Math.abs(gamma) > 1) {
                flag = false;
                box.style.transform = 'rotateY(' + gamma * 3 + 'deg)';
            } else {
                flag = true;
            }

        })
    </script>
</body>
</html>